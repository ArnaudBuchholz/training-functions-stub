<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>training-functions-stub</title>
		<meta name="description" content="Training on JavaScript functions using stubs">
		<meta name="author" content="Arnaud Buchholz">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
		<link rel="stylesheet" href="lib/reveal/css/reveal.css">
		<link rel="stylesheet" href="lib/reveal/css/theme/sky.css" id="theme">
		<link rel="stylesheet" href="lib/reveal/lib/css/zenburn.css">
        <link rel="stylesheet" href="dashboard/dashboard.css">
		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( "link" );
			link.rel = "stylesheet";
			link.type = "text/css";
			link.href = "lib/reveal/" + (window.location.search.match(/print-pdf/gi) ? "css/print/pdf.css" : "css/print/paper.css");
			document.getElementsByTagName("head")[0].appendChild(link);
		</script>
		<!--[if lt IE 9]>
		<script src="lib/reveal/lib/js/html5shiv.js"></script>
		<![endif]-->
        <script src="dashboard/inject.js"></script>
	</head>
	<body>
		<div class="reveal">
			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h3>Training on JavaScript functions using stubs</h3>
					<p>
						<small>
                            Based on <a href="http://sinonjs.org/">Sinon.JS</a> spies, stubs and mocks
                            <br/>
							Presented by <a href="https://github.com/ArnaudBuchholz">Arnaud Buchholz</a>
							<br/>
							Presentation made with <a href="https://github.com/hakimel/reveal.js">Reveal.js</a>
						</small>
					</p>
				</section>
				<section>
					<h3>Arnaud Buchholz</h3>
                    <table>
                        <tr>
                            <td>
                                <img src="lib/gfx/me40.png">
                            </td>
                            <td  style="vertical-align: top;">
                                <ul>
                                    <li>In the software industry since 1998</li>
                                    <li>Former trainer</li>
                                    <li>Working with JavaScript for 10 years (4 years as a Front-End developer)</li>
                                    <li>Passionate about JavaScript, curious &amp; <a href="https://github.com/ArnaudBuchholz">experimenting</a></li>
                                    <li>French and almost Canadian</li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <a href="https://ca.linkedin.com/in/arnaudbuchholz"><img style="border: 0" src="lib/gfx/LinkedIn.png"></a>
                                <a href="https://https://github.com/ArnaudBuchholz"><img style="border: 0" src="lib/gfx/GitHub.png"></a>
                            </td>
                        </tr>
                    </table>
				</section>
				<section>
                    <section>
                        <h3>Content and Audience</h3>
                        <ul>
                            <li>Discovery of <a href="http://sinonjs.org/">Sinon.JS</a> through custom implementation</li>
                            <li>Best practices using TDD, linting, coverage and automation</li>
                            <li>No <a href="http://es6-features.org/#Constants">ES6</a></li>
                            <li>Progressive pace
                                <ul>
                                    <li>Beginner to intermediate (US1 &amp; US2)</li>
                                    <li>Intermediate to advanced <i>(coming stories)</i></li>
                                </ul>
                            </li>
                        </ul>
                    </section>
                    <section>
                        <h3>Sinon.JS</h3>
                        <p>Standalone test spies, stubs and mocks for JavaScript.<br/>
                        No dependencies, works with any unit testing framework.</p>
                        <pre><code class="hljs" data-trim contenteditable>
"test should call subscribers on publish": function () {
    var callback = sinon.spy();
    PubSub.subscribe("message", callback);
    PubSub.publishSync("message");
    assertTrue(callback.called);
}
                        </code></pre>
                    </section>
                    <section>
                        <h3>Test Driven Development</h3>
                        According to <a href="http://blog.cleancoder.com/uncle-bob/2014/12/17/TheCyclesOfTDD.html">uncle Bob</a>, the steps are:
                        <ul>
                            <li class="fragment">You must write a failing test <strong>before</strong> you write any production code.</li>
                            <li class="fragment">You must not write more of a test than is <strong>sufficient to fail</strong>, or fail to compile.</li>
                            <li class="fragment">You must not write more production code than is <strong>sufficient to make the currently failing test pass</strong>.</li>
                        </ul>
                    </section>
                    <section>
                        <h3>Tests frameworks</h3>
                        <p>There are <a href="https://en.wikipedia.org/wiki/List_of_unit_testing_frameworks#JavaScript">many framweworks</a>.</p>
                        Two are used for this training:
                        <ul>
                            <li><a href="http://mochajs.org/">Mocha</a></li>
                            <li><a href="https://qunitjs.com/">qUnit</a> (through an <a href="https://en.wikipedia.org/wiki/Adapter_pattern">adapter</a>)</li>
                        </ul>
                    </section>
                    <section>
                        <h3>Linting</h3>
                        <p>A linter <strong>validates</strong> your code as you write it and before it is executed.</p>
                        <ul>
                            <li>It catches most common errors</li>
                            <li>It ensures code consistency</li>
                        </ul>
                        <p>There are <a href="http://www.sitepoint.com/comparison-javascript-linting-tools/">some linters</a>.</p>
                        The one used for this training is <a href="http://eslint.org/">ESLint</a>.
                    </section>
                    <section>
                        <h3>Coverage</h3>
                        <p>Code coverage is a measure used to describe the degree to which the source code of a program
                            is tested by a particular test suite.</p>
                        <p>There are <a href="https://www.google.ca/search?q=Javascript+code+coverage">some tools</a>.</p>
                        The one used for this training is <a href="http://blanketjs.org/">Blanket.js</a>.
                    </section>
                    <section>
                        <h3>Automation</h3>
                        <p>As a lazy developer, I don't want to spend my time repeating the same tasks
                            in order to focus on my job.</p>
                        <p>There are <a href="http://blog.cozycloud.cc/technic/2014/06/18/task-runners-comparison/">some task runners</a>.</p>
                        The one used for this training is <a href="http://gruntjs.com/">Grunt</a>.
                    </section>
                    <section us-ref="init">
                        <h3>Environment</h3>
                        <ul>
                            <li>Source files (current version)</li>
                            <li>Quality reports</li>
                            <li>Source files (version to apply)</li>
                        </ul>
                    </section>
                    <section us-ref="test">
                        <h3>Environment</h3>
                        <p>An example of errors</p>
                    </section>
				</section>
				<section>
                    <h3>User Stories</h3>
                </section>
                <section>
                    <section data-markdown>
                        <script type="text/template">
                            As a developer, I want to substitute a function with a new one in order to gather information from its use

                            * it is accessible through sinon.spy
                            * it accepts no parameter
                            * it accepts a function parameter
                            * it rejects any other parameter
                            * it returns a function
                            * it returns a function that behaves like the parameter
                            * it returns a function that does nothing when no parameter was specified
                        </script>
                    </section>
                    <section us-ref="us1/1">
                        <h4>Create a test file</h4>
                        <p>Using mocha syntax</p>
                    </section>
                    <section us-ref="us1/2">
                        <h4>Setting acceptance criterias</h4>
                        <p>Because they are not yet implemented,<br/>they are <a href="https://mochajs.org/#pending-tests">pending tests</a></p>
                    </section>
                    <section us-ref="us1/3">
                        <h4 class="acceptance-criteria">It is accessible through sinon.spy</h4>
                        <p>Test case implementation</p>
                    </section>
                    <section us-ref="us1/4">
                        <h4>Start sinon.js implementation</h4>
                        <p><a href="https://en.wikipedia.org/wiki/Immediately-invoked_function_expression">Immediately Invoked Function Expressions</a><br/>
                            as a private context holder
                        </p>
                    </section>
                    <section us-ref="us1/5">
                        <h4>use strict</h4>
                        <p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode">Strict mode</a> offers:
                            <ul>
                                <li>Errors checking</li>
                                <li>Better variable handling (no with)</li>
                                <li>Safer JavaScript (eval, this)</li>
                            </ul>
                        </p>
                    </section>
                    <section us-ref="us1/6">
                        <h4>Exposing the API</h4>
                        <p>Using the <a href="https://www.pluralsight.com/blog/software-development/revealing-module-pattern-structuring-javascript-code-part-iii">revealing module pattern</a></p>
                    </section>
                    <section us-ref="us1/7">
                        <h4 class="acceptance-criteria">It accepts no parameter</h4>
                        <p>Test case implementation</p>
                    </section>
                    <section us-ref="us1/8">
                        <h4 class="acceptance-criteria">It accepts a function parameter</h4>
                        <p>Test case implementation</p>
                        <small class="fragment">easy, isn't it?</small>
                    </section>
                    <section us-ref="us1/9">
                        <h4 class="acceptance-criteria">It rejects any other parameter</h4>
                        <p>Test case implementation<br/>
                            Let's start with boolean</p>
                    </section>
                    <section us-ref="us1/10">
                        <h4>Implementation</h4>
                        <p>Using a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error">standard exception</a></p>
                    </section>
                    <section us-ref="us1/11">
                        <h4 class="acceptance-criteria">It rejects any other parameter</h4>
                        <p>Let's add number</p>
                        <small class="fragment">Feel the power of Copy&amp;Paste</small>
                    </section>
                    <section us-ref="us1/12">
                        <h1><a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY</a></h1>
                    </section>
                    <section us-ref="us1/13">
                        <h4 class="acceptance-criteria">It rejects any other parameter</h4>
                        <p>How much does it cost to add <a href="https://en.wikipedia.org/wiki/%22Hello,_World!%22_program">"Hello, World!"</a>?</p>
                    </section>
                    <section us-ref="us1/14">
                        <h4>Implementation</h4>
                        <p>Testing parameter validity using the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a> value</p>
                    </section>
                    <section us-ref="us1/15">
                        <h4>Implementation</h4>
                        <p>!(a || b) === !a && !b</p>
                    </section>
                    <section us-ref="us1/16">
                        <h4 class="acceptance-criteria">It rejects any other parameter</h4>
                        <p>Object and test description</p>
                    </section>
                    <section us-ref="us1/17">
                        <h4 class="acceptance-criteria">It returns a function</h4>
                        <ul>
                            <li>When a function parameter is passed</li>
                            <li>When no parameter is passed</li>
                        </ul>
                    </section>
                    <section us-ref="us1/18">
                        <h4>Implementation</h4>
                        <p>When a function parameter is passed</p>
                    </section>
                    <section us-ref="us1/19">
                        <h4>Implementation</h4>
                        <p>When no parameter is passed</p>
                    </section>
                    <section us-ref="us1/20">
                        <h4 class="acceptance-criteria">It returns a function that behaves like the parameter</h4>
                        <p>What defines the function behavior?</p>
                        <ul>
                            <li class="fragment">Result</li>
                            <li class="fragment">Parameters</li>
                            <li class="fragment">Exception</li>
                            <li class="fragment"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this">this</a></li>
                        </ul>
                    </section>
                    <section us-ref="us1/21">
                        <h4 class="acceptance-criteria">It returns a function that does nothing when no parameter was specified</h4>
                        <p>What defines an empty function behavior?</p>
                    </section>
                    <section us-ref="us1/21">
                        <h4>End of the first story</h4>
                        <p>Test / Code ratio is almost 4 / 1</p>
                    </section>
                </section>
                <section>
                    <section data-markdown>
                        <script type="text/template">
                            As a developer, I want to know how many times a spied function has been called in order to check this information in my tests

                            * it exposes the property "called" the indicates if the function was called
                            * it exposes the property "callCount" that indicates how often the function was called
                        </script>
                    </section>
                </section>
                <section>
                    <small>more to come...</small>
                </section>
                <section>
                    <h3>Your feedback is welcome</h3>
                    <a href="https://github.com/ArnaudBuchholz/training-functions-stub"><img style="border: 0" src="lib/gfx/GitHub.png"></a>
                </section>
			</div>
		</div>
		<script src="lib/reveal/lib/js/head.min.js"></script>
		<script src="lib/reveal/js/reveal.js"></script>
		<script>
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,
				transition: "slide", // none/fade/slide/convex/concave/zoom
				// Optional reveal.js plugins
				dependencies: [{
                    src: "lib/reveal/lib/js/classList.js",
                    condition: function() {
                        return !document.body.classList;
                    }
                }, {
                    src: "lib/reveal/plugin/markdown/marked.js",
                    condition: function() {
                        return !!document.querySelector("[data-markdown]");
                    }
                }, {
                    src: "lib/reveal/plugin/markdown/markdown.js",
                    condition: function() {
                        return !!document.querySelector("[data-markdown]");
                    }
                }, {
                    src: "lib/reveal/plugin/highlight/highlight.js",
                    async: true,
                    callback: function() {
                        hljs.initHighlightingOnLoad();
                    }
                }, {
                    src: "lib/reveal/plugin/zoom-js/zoom.js",
                    async: true
                }, {
                    src: "lib/reveal/plugin/notes/notes.js",
                    async: true
                }]
			});
			// Update links to open in a new window
			[].slice.call(document.querySelectorAll("a")).forEach(function (a) {
				a.setAttribute("target", "_blank");
			});
		</script>
	</body>
</html>
